\hypertarget{HAL__SPI_8c}{}\section{Referencia del Archivo source/hal/\+H\+A\+L\+\_\+\+S\+PI.c}
\label{HAL__SPI_8c}\index{source/hal/\+H\+A\+L\+\_\+\+S\+P\+I.\+c@{source/hal/\+H\+A\+L\+\_\+\+S\+P\+I.\+c}}


Funciones a nivel de aplicacion del periferico S\+PI (L\+P\+C845)  


{\ttfamily \#include $<$stddef.\+h$>$}\newline
{\ttfamily \#include $<$H\+A\+L\+\_\+\+S\+P\+I.\+h$>$}\newline
{\ttfamily \#include $<$H\+P\+L\+\_\+\+S\+P\+I.\+h$>$}\newline
{\ttfamily \#include $<$H\+P\+L\+\_\+\+S\+W\+M.\+h$>$}\newline
{\ttfamily \#include $<$H\+P\+L\+\_\+\+S\+Y\+S\+C\+O\+N.\+h$>$}\newline
{\ttfamily \#include $<$H\+P\+L\+\_\+\+N\+V\+I\+C.\+h$>$}\newline
Dependencia gráfica adjunta para H\+A\+L\+\_\+\+S\+P\+I.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{HAL__SPI_8c__incl}
\end{center}
\end{figure}
\subsection*{Funciones}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{HAL__SPI_8c_aa0ae96a3a401683b77a8a5b816e27ac4}\label{HAL__SPI_8c_aa0ae96a3a401683b77a8a5b816e27ac4}} 
static void {\bfseries dummy\+\_\+irq} (void)
\item 
static void \hyperlink{HAL__SPI_8c_a4709544dfd508d59f8507d0fa0d71c74}{spi\+\_\+irq\+\_\+handler} (uint8\+\_\+t inst)
\begin{DoxyCompactList}\small\item\em Manejador generico de interrupciones de S\+PI. \end{DoxyCompactList}\item 
void \hyperlink{HAL__SPI_8c_a9babc814c41f2d8714551fc9af81d346}{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+init} (hal\+\_\+spi\+\_\+sel\+\_\+en inst, const \hyperlink{structhal__spi__master__mode__config__t}{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+config\+\_\+t} $\ast$config)
\begin{DoxyCompactList}\small\item\em Inicializar S\+PI en modo master. \end{DoxyCompactList}\item 
uint16\+\_\+t \hyperlink{HAL__SPI_8c_a6ca16392e2331ab9db9d97f3a6358346}{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+rx\+\_\+data} (hal\+\_\+spi\+\_\+sel\+\_\+en inst)
\begin{DoxyCompactList}\small\item\em Leer el dato recibido. \end{DoxyCompactList}\item 
void \hyperlink{HAL__SPI_8c_a11b672c8dcef79e8784497b23f1618b7}{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+config\+\_\+tx} (hal\+\_\+spi\+\_\+sel\+\_\+en inst, const \hyperlink{HAL__SPI_8h_structhal__spi__master__mode__tx__config__t}{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+tx\+\_\+config\+\_\+t} $\ast$config)
\begin{DoxyCompactList}\small\item\em Configurar la transmision. \end{DoxyCompactList}\item 
void \hyperlink{HAL__SPI_8c_ad7cfe819f562f90c6bb07e2577699d86}{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+tx\+\_\+data} (hal\+\_\+spi\+\_\+sel\+\_\+en inst, const \hyperlink{HAL__SPI_8h_structhal__spi__master__mode__tx__data__t}{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+tx\+\_\+data\+\_\+t} $\ast$data)
\begin{DoxyCompactList}\small\item\em Transmitir dato. \end{DoxyCompactList}\item 
void \hyperlink{HAL__SPI_8c_a5bbc56bb8e86b9b077822fab5297e513}{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+register\+\_\+tx\+\_\+callback} (hal\+\_\+spi\+\_\+sel\+\_\+en inst, void($\ast$new\+\_\+callback)(void))
\begin{DoxyCompactList}\small\item\em Actualizar callback en T\+X\+R\+DY. \end{DoxyCompactList}\item 
void \hyperlink{HAL__SPI_8c_a363e7e3be50a625bd8fe6a748c473027}{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+register\+\_\+rx\+\_\+callback} (hal\+\_\+spi\+\_\+sel\+\_\+en inst, void($\ast$new\+\_\+callback)(void))
\begin{DoxyCompactList}\small\item\em Actualizar callback en R\+X\+R\+DY. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{HAL__SPI_8c_a47e5c0c756d2cbe7bc497bfc82905521}\label{HAL__SPI_8c_a47e5c0c756d2cbe7bc497bfc82905521}} 
void \hyperlink{HAL__SPI_8c_a47e5c0c756d2cbe7bc497bfc82905521}{S\+P\+I0\+\_\+\+I\+R\+Q\+Handler} (void)
\begin{DoxyCompactList}\small\item\em Manejador de interrupcion de S\+P\+I0. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{HAL__SPI_8c_a9bbd8c17ce4f49adcca47d11f482aab6}\label{HAL__SPI_8c_a9bbd8c17ce4f49adcca47d11f482aab6}} 
void \hyperlink{HAL__SPI_8c_a9bbd8c17ce4f49adcca47d11f482aab6}{S\+P\+I1\+\_\+\+I\+R\+Q\+Handler} (void)
\begin{DoxyCompactList}\small\item\em Manejador de interrupcion de S\+P\+I1. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static void($\ast$ \hyperlink{HAL__SPI_8c_aa0849534f872b6e913d5e446c6bd2d93}{spi\+\_\+rx\+\_\+callback} \mbox{[}$\,$\mbox{]})(void)
\begin{DoxyCompactList}\small\item\em Callbacks registrados a la recepcion de un dato por S\+PI. \end{DoxyCompactList}\item 
static void($\ast$ \hyperlink{HAL__SPI_8c_a67a3af6fa0b94d7c0f3d4e51a9aa9cca}{spi\+\_\+tx\+\_\+callback} \mbox{[}$\,$\mbox{]})(void)
\begin{DoxyCompactList}\small\item\em Callbacks registrados a la liberacion del buffer de transmision de S\+PI. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Descripción detallada}
Funciones a nivel de aplicacion del periferico S\+PI (L\+P\+C845) 

\begin{DoxyAuthor}{Autor}
Augusto Santini 
\end{DoxyAuthor}
\begin{DoxyDate}{Fecha}
3/2020 
\end{DoxyDate}
\begin{DoxyVersion}{Versión}
1.\+0 
\end{DoxyVersion}


\subsection{Documentación de las funciones}
\mbox{\Hypertarget{HAL__SPI_8c_a4709544dfd508d59f8507d0fa0d71c74}\label{HAL__SPI_8c_a4709544dfd508d59f8507d0fa0d71c74}} 
\index{H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}!spi\+\_\+irq\+\_\+handler@{spi\+\_\+irq\+\_\+handler}}
\index{spi\+\_\+irq\+\_\+handler@{spi\+\_\+irq\+\_\+handler}!H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}}
\subsubsection{\texorpdfstring{spi\+\_\+irq\+\_\+handler()}{spi\_irq\_handler()}}
{\footnotesize\ttfamily static void spi\+\_\+irq\+\_\+handler (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{inst }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Manejador generico de interrupciones de S\+PI. 


\begin{DoxyParams}[1]{Parámetros}
\mbox{\tt in}  & {\em inst} & Instancia que genero la interrupcion \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{HAL__SPI_8c_a9babc814c41f2d8714551fc9af81d346}\label{HAL__SPI_8c_a9babc814c41f2d8714551fc9af81d346}} 
\index{H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}!hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+init@{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+init}}
\index{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+init@{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+init}!H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}}
\subsubsection{\texorpdfstring{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+init()}{hal\_spi\_master\_mode\_init()}}
{\footnotesize\ttfamily void hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+init (\begin{DoxyParamCaption}\item[{hal\+\_\+spi\+\_\+sel\+\_\+en}]{inst,  }\item[{const \hyperlink{structhal__spi__master__mode__config__t}{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+config\+\_\+t} $\ast$}]{config }\end{DoxyParamCaption})}



Inicializar S\+PI en modo master. 


\begin{DoxyParams}[1]{Parámetros}
\mbox{\tt in}  & {\em inst} & Instancia de S\+PI a inicializar \\
\hline
\mbox{\tt in}  & {\em config} & Configuracion deseada \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{HAL__SPI_8c_a6ca16392e2331ab9db9d97f3a6358346}\label{HAL__SPI_8c_a6ca16392e2331ab9db9d97f3a6358346}} 
\index{H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}!hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+rx\+\_\+data@{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+rx\+\_\+data}}
\index{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+rx\+\_\+data@{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+rx\+\_\+data}!H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}}
\subsubsection{\texorpdfstring{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+rx\+\_\+data()}{hal\_spi\_master\_mode\_rx\_data()}}
{\footnotesize\ttfamily uint16\+\_\+t hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+rx\+\_\+data (\begin{DoxyParamCaption}\item[{hal\+\_\+spi\+\_\+sel\+\_\+en}]{inst }\end{DoxyParamCaption})}



Leer el dato recibido. 


\begin{DoxyParams}[1]{Parámetros}
\mbox{\tt in}  & {\em inst} & Instancia a consultar \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
Dato recibido 
\end{DoxyReturn}
\mbox{\Hypertarget{HAL__SPI_8c_a11b672c8dcef79e8784497b23f1618b7}\label{HAL__SPI_8c_a11b672c8dcef79e8784497b23f1618b7}} 
\index{H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}!hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+config\+\_\+tx@{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+config\+\_\+tx}}
\index{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+config\+\_\+tx@{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+config\+\_\+tx}!H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}}
\subsubsection{\texorpdfstring{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+config\+\_\+tx()}{hal\_spi\_master\_mode\_config\_tx()}}
{\footnotesize\ttfamily void hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+config\+\_\+tx (\begin{DoxyParamCaption}\item[{hal\+\_\+spi\+\_\+sel\+\_\+en}]{inst,  }\item[{const \hyperlink{HAL__SPI_8h_structhal__spi__master__mode__tx__config__t}{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+tx\+\_\+config\+\_\+t} $\ast$}]{config }\end{DoxyParamCaption})}



Configurar la transmision. 


\begin{DoxyParams}[1]{Parámetros}
\mbox{\tt in}  & {\em inst} & Instancia a configurar \\
\hline
\mbox{\tt in}  & {\em config} & Configuracion para la transmision deseada \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{HAL__SPI_8c_ad7cfe819f562f90c6bb07e2577699d86}\label{HAL__SPI_8c_ad7cfe819f562f90c6bb07e2577699d86}} 
\index{H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}!hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+tx\+\_\+data@{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+tx\+\_\+data}}
\index{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+tx\+\_\+data@{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+tx\+\_\+data}!H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}}
\subsubsection{\texorpdfstring{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+tx\+\_\+data()}{hal\_spi\_master\_mode\_tx\_data()}}
{\footnotesize\ttfamily void hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+tx\+\_\+data (\begin{DoxyParamCaption}\item[{hal\+\_\+spi\+\_\+sel\+\_\+en}]{inst,  }\item[{const \hyperlink{HAL__SPI_8h_structhal__spi__master__mode__tx__data__t}{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+tx\+\_\+data\+\_\+t} $\ast$}]{data }\end{DoxyParamCaption})}



Transmitir dato. 


\begin{DoxyParams}[1]{Parámetros}
\mbox{\tt in}  & {\em inst} & Instancia a utilizar \\
\hline
\mbox{\tt in}  & {\em data} & Dato a transmitir, con controles asociados \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{HAL__SPI_8c_a5bbc56bb8e86b9b077822fab5297e513}\label{HAL__SPI_8c_a5bbc56bb8e86b9b077822fab5297e513}} 
\index{H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}!hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+register\+\_\+tx\+\_\+callback@{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+register\+\_\+tx\+\_\+callback}}
\index{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+register\+\_\+tx\+\_\+callback@{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+register\+\_\+tx\+\_\+callback}!H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}}
\subsubsection{\texorpdfstring{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+register\+\_\+tx\+\_\+callback()}{hal\_spi\_master\_mode\_register\_tx\_callback()}}
{\footnotesize\ttfamily void hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+register\+\_\+tx\+\_\+callback (\begin{DoxyParamCaption}\item[{hal\+\_\+spi\+\_\+sel\+\_\+en}]{inst,  }\item[{void($\ast$)(void)}]{new\+\_\+callback }\end{DoxyParamCaption})}



Actualizar callback en T\+X\+R\+DY. 


\begin{DoxyParams}[1]{Parámetros}
\mbox{\tt in}  & {\em inst} & Instancia a configurar \\
\hline
\mbox{\tt in}  & {\em new\+\_\+callback} & Nuevo callback a ejecutar en T\+X\+R\+DY \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{HAL__SPI_8c_a363e7e3be50a625bd8fe6a748c473027}\label{HAL__SPI_8c_a363e7e3be50a625bd8fe6a748c473027}} 
\index{H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}!hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+register\+\_\+rx\+\_\+callback@{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+register\+\_\+rx\+\_\+callback}}
\index{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+register\+\_\+rx\+\_\+callback@{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+register\+\_\+rx\+\_\+callback}!H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}}
\subsubsection{\texorpdfstring{hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+register\+\_\+rx\+\_\+callback()}{hal\_spi\_master\_mode\_register\_rx\_callback()}}
{\footnotesize\ttfamily void hal\+\_\+spi\+\_\+master\+\_\+mode\+\_\+register\+\_\+rx\+\_\+callback (\begin{DoxyParamCaption}\item[{hal\+\_\+spi\+\_\+sel\+\_\+en}]{inst,  }\item[{void($\ast$)(void)}]{new\+\_\+callback }\end{DoxyParamCaption})}



Actualizar callback en R\+X\+R\+DY. 


\begin{DoxyParams}[1]{Parámetros}
\mbox{\tt in}  & {\em inst} & Instancia a configurar \\
\hline
\mbox{\tt in}  & {\em new\+\_\+callback} & Nuevo callback a ejecutar en R\+X\+R\+DY \\
\hline
\end{DoxyParams}


\subsection{Documentación de las variables}
\mbox{\Hypertarget{HAL__SPI_8c_aa0849534f872b6e913d5e446c6bd2d93}\label{HAL__SPI_8c_aa0849534f872b6e913d5e446c6bd2d93}} 
\index{H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}!spi\+\_\+rx\+\_\+callback@{spi\+\_\+rx\+\_\+callback}}
\index{spi\+\_\+rx\+\_\+callback@{spi\+\_\+rx\+\_\+callback}!H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}}
\subsubsection{\texorpdfstring{spi\+\_\+rx\+\_\+callback}{spi\_rx\_callback}}
{\footnotesize\ttfamily void($\ast$ spi\+\_\+rx\+\_\+callback\mbox{[}$\,$\mbox{]})(void)\hspace{0.3cm}{\ttfamily [static]}}

{\bfseries Valor inicial\+:}
\begin{DoxyCode}
=
\{
    dummy\_irq,
    dummy\_irq
\}
\end{DoxyCode}


Callbacks registrados a la recepcion de un dato por S\+PI. 

\mbox{\Hypertarget{HAL__SPI_8c_a67a3af6fa0b94d7c0f3d4e51a9aa9cca}\label{HAL__SPI_8c_a67a3af6fa0b94d7c0f3d4e51a9aa9cca}} 
\index{H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}!spi\+\_\+tx\+\_\+callback@{spi\+\_\+tx\+\_\+callback}}
\index{spi\+\_\+tx\+\_\+callback@{spi\+\_\+tx\+\_\+callback}!H\+A\+L\+\_\+\+S\+P\+I.\+c@{H\+A\+L\+\_\+\+S\+P\+I.\+c}}
\subsubsection{\texorpdfstring{spi\+\_\+tx\+\_\+callback}{spi\_tx\_callback}}
{\footnotesize\ttfamily void($\ast$ spi\+\_\+tx\+\_\+callback\mbox{[}$\,$\mbox{]})(void)\hspace{0.3cm}{\ttfamily [static]}}

{\bfseries Valor inicial\+:}
\begin{DoxyCode}
=
\{
    dummy\_irq,
    dummy\_irq
\}
\end{DoxyCode}


Callbacks registrados a la liberacion del buffer de transmision de S\+PI. 

